---
# ============================================================
# ç¬¬ä¸€æ­¥ï¼šåœæ­¢æ‰€æœ‰ Slave èŠ‚ç‚¹
# é˜²æ­¢ Slave è¯•å›¾è¿æ¥å·²ç»å…³é—­çš„ Master è€ŒæŠ¥é”™
# ============================================================
- hosts: mysql_slave
  gather_facts: no
  become: yes  # ğŸ’¡ æ–°å¢ï¼šç¡®ä¿ä½¿ç”¨ sudo æƒé™åœæ­¢æœåŠ¡
  tasks:
    - name: åœæ­¢ Slave èŠ‚ç‚¹çš„ MySQL æœåŠ¡
      service:
        name: mysqld
        state: stopped

    - name: ç¡®è®¤ç«¯å£å·²å…³é—­
      wait_for:
        port: 3306
        state: stopped
        timeout: 30

# ============================================================
# ç¬¬äºŒæ­¥ï¼šåœæ­¢ Master èŠ‚ç‚¹
# ============================================================
- hosts: mysql_master
  gather_facts: no
  become: yes  # ğŸ’¡ æ–°å¢
  tasks:
    - name: åœæ­¢ Master èŠ‚ç‚¹çš„ MySQL æœåŠ¡
      service:
        name: mysqld
        state: stopped

    - name: æ‰“å°å…³é—­å®Œæˆä¿¡æ¯
      debug:
        msg: "é›†ç¾¤å·²å®Œå…¨å…³é—­ (Master & Slaves Stopped)."