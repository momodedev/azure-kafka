# MySQL Ansible inventory (generated by Terraform)

# 定义主节点 (Master)
[mysql_master]
172.16.1.7

# 定义从节点 (Slaves)
[mysql_slave]
172.16.1.5
172.16.1.6

# 定义一个总组
[db_servers:children]
mysql_master
mysql_slave

# --- 关键修改区域 ---
[db_servers:vars]
# 1. 必须改为 azureuser，因为 Azure 不让 root 直接连
ansible_user=azureuser
mysql_datadir=/data/mysql
mount_point=/data

# 2. 指定私钥路径 (如果是默认 ~/.ssh/id_ed25519 可省略，但写上更保险)
ansible_ssh_private_key_file=~/.ssh/id_ed25519

# 3. 开启自动提权：连进去后自动执行 sudo 变成 root
ansible_become=yes
ansible_become_method=sudo
ansible_become_user=root
ansible_become_pass=

# 额外：避免首次连接交互
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'